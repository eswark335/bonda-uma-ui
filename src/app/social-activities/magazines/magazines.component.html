<div class="magazines-container">
  <!-- Magazine Selection View -->
  <div *ngIf="!selectedMagazine" class="magazine-selection">
    <div class="header">
      <h2>ğŸ“– Magazines</h2>
      <p>Select a magazine to view with our modern PDF reader</p>
    </div>
    
    <!-- Loading State -->
    <div *ngIf="loadingMagazines" class="loading-container">
      <div class="loading-spinner"></div>
      <p>Loading magazines...</p>
    </div>
    
    <!-- Dropdown -->
    <div *ngIf="!loadingMagazines" class="dropdown-container">
      <label for="magazine-select">Choose a Magazine:</label>
      <select 
        id="magazine-select" 
        class="magazine-dropdown"
        (change)="onMagazineChange($event)"
      >
        <option value="">-- Select Magazine --</option>
        <option *ngFor="let magazine of magazines; let i = index" [value]="i">
          {{ magazine.name }}
        </option>
      </select>
    </div>
  </div>

  <!-- Modern PDF Viewer -->
  <div *ngIf="selectedMagazine" class="pdf-viewer-container">
    <div class="viewer-header">
      <div class="header-left">
        <button class="back-btn" (click)="goBack()">
          <span class="icon">â†</span> Back
        </button>
      </div>
      
      <div class="header-center">
        <h3>{{ selectedMagazine.name }}</h3>
      </div>
      
      <div class="header-right">
        <div class="viewer-controls">
          <button class="control-btn" (click)="openPdfInNewTab()" title="Open in New Tab">
            <span class="icon">ğŸ”—</span>
          </button>
          <button class="download-btn" (click)="downloadMagazine()" title="Download">
            <span class="icon">ğŸ“¥</span> Download
          </button>
        </div>
      </div>
    </div>
    
    <!-- Loading Indicator -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner"></div>
      <p>Loading PDF viewer...</p>
    </div>
    
    <!-- PDF Viewer -->
    <div class="pdf-viewer" [class.loading]="isLoading">
      <!-- Simple iframe approach for better compatibility -->
      <iframe 
        [src]="pdfUrl" 
        width="100%" 
        height="700px"
        frameborder="0"
        class="pdf-iframe">
      </iframe>
      
      <!-- Fallback options -->
      <div class="pdf-fallback">
        <div class="fallback-content">
          <div class="fallback-icon">ğŸ“„</div>
          <h4>PDF Viewer</h4>
          <p>Use the options below to view the magazine:</p>
          <div class="fallback-options">
            <button class="view-btn" (click)="openPdfInNewTab()">
              <span class="icon">ğŸ”—</span> Open in New Tab
            </button>
            <button class="download-btn" (click)="downloadMagazine()">
              <span class="icon">ğŸ“¥</span> Download PDF
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>